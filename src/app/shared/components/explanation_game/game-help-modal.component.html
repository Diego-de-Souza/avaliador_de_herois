@if (isOpen) {
  <div class="modal-overlay" [class.dark]="_themeService === 'dark'" [class.light]="_themeService === 'light'">
    <div class="modal-container">
      <div class="modal-header">
        <h2>üìñ Guia do Hero Battle</h2>
        <button class="close-btn" (click)="close()">‚úï</button>
      </div>

      <div class="modal-content">
        <!-- MENU LATERAL -->
        <div class="sidebar">
          <nav class="section-nav">
            @for (section of sections; track section.id) {
              <button 
                class="nav-item"
                [class.active]="activeSection === section.id"
                (click)="selectSection(section.id)">
                <span class="nav-icon">{{ section.icon }}</span>
                <span class="nav-text">{{ section.title }}</span>
              </button>
            }
          </nav>
        </div>

        <!-- CONTE√öDO PRINCIPAL -->
        <div class="main-content">
          @if (getActiveSection(); as section) {
            <div class="section-content">
              <!-- CABE√áALHO DA SE√á√ÉO -->
              <div class="section-header">
                <h3>{{ section.icon }} {{ section.title }}</h3>
              </div>

              <!-- CONTE√öDO PRINCIPAL -->
              <div class="section-body">
                @for (paragraph of section.content; track paragraph) {
                  <div class="content-paragraph">
                    {{ paragraph }}
                  </div>
                }

                <!-- SUBSE√á√ïES -->
                @for (subsection of section.subsections; track subsection.title) {
                  <div class="subsection">
                    <h4 class="subsection-title">{{ subsection.title }}</h4>
                    
                    @for (content of subsection.content; track content) {
                      <div class="subsection-content">
                        {{ content }}
                      </div>
                    }

                    <!-- DICAS DA SUBSE√á√ÉO -->
                    @if (subsection.tips && subsection.tips.length > 0) {
                      <div class="tips-container">
                        <h5 class="tips-title">üí° Dicas:</h5>
                        <ul class="tips-list">
                          @for (tip of subsection.tips; track tip) {
                            <li class="tip-item">{{ tip }}</li>
                          }
                        </ul>
                      </div>
                    }
                  </div>
                }

                <!-- SE√á√ïES ESPECIAIS -->
                
                <!-- INFORMA√á√ïES DAS CLASSES -->
                @if (section.id === 'getting-started') {
                  <div class="special-section">
                    <h4 class="special-title">üé≠ Guia Detalhado das Classes</h4>
                    <div class="classes-grid">
                      @for (classInfo of classesInfo; track classInfo.name) {
                        <div class="class-info-card">
                          <div class="class-header">
                            <span class="class-icon">{{ classInfo.icon }}</span>
                            <h5>{{ classInfo.name }}</h5>
                          </div>
                          
                          <p class="class-description">{{ classInfo.description }}</p>
                          
                          <div class="class-strengths">
                            <h6>‚úÖ Pontos Fortes:</h6>
                            <ul>
                              @for (strength of classInfo.strengths; track strength) {
                                <li>{{ strength }}</li>
                              }
                            </ul>
                          </div>
                          
                          <div class="class-weaknesses">
                            <h6>‚ùå Fraquezas:</h6>
                            <ul>
                              @for (weakness of classInfo.weaknesses; track weakness) {
                                <li>{{ weakness }}</li>
                              }
                            </ul>
                          </div>
                          
                          <div class="class-best-for">
                            <h6>üéØ Ideal para:</h6>
                            <p>{{ classInfo.bestFor }}</p>
                          </div>
                        </div>
                      }
                    </div>
                  </div>
                }

                <!-- TABELA ELEMENTAL -->
                @if (section.id === 'elemental-system') {
                  <div class="special-section">
                    <h4 class="special-title">üåü Tabela de Vantagens Elementais</h4>
                    <div class="elemental-table">
                      <div class="table-header">
                        <div class="header-cell">Elemento</div>
                        <div class="header-cell">Forte Contra</div>
                        <div class="header-cell">Fraco Contra</div>
                        <div class="header-cell">Descri√ß√£o</div>
                      </div>
                      
                      @for (element of elementalInfo; track element.element) {
                        <div class="table-row">
                          <div class="cell element-cell">
                            <span class="element-icon">{{ element.icon }}</span>
                            {{ element.element }}
                          </div>
                          <div class="cell">{{ element.strongAgainst }}</div>
                          <div class="cell">{{ element.weakAgainst }}</div>
                          <div class="cell description">{{ element.description }}</div>
                        </div>
                      }
                    </div>
                  </div>
                }

                <!-- LISTA DE INIMIGOS -->
                @if (section.id === 'enemies-bosses') {
                  <div class="special-section">
                    <h4 class="special-title">üëπ Lista de Inimigos por N√≠vel</h4>
                    <div class="enemies-list">
                      <div class="enemy-item normal">
                        <span class="enemy-level">N√≠vel 1</span>
                        <span class="enemy-icon">üõ°Ô∏è</span>
                        <span class="enemy-name">Cavaleiro de Bronze</span>
                        <span class="enemy-desc">Inimigo b√°sico e equilibrado</span>
                      </div>
                      
                      <div class="enemy-item normal">
                        <span class="enemy-level">N√≠vel 2</span>
                        <span class="enemy-icon">üèπ</span>
                        <span class="enemy-name">Arqueiro Novato</span>
                        <span class="enemy-desc">Ataques √† dist√¢ncia r√°pidos</span>
                      </div>
                      
                      <div class="enemy-item normal">
                        <span class="enemy-level">N√≠vel 3</span>
                        <span class="enemy-icon">üî•</span>
                        <span class="enemy-name">Feiticeira das Chamas</span>
                        <span class="enemy-desc">Magias de fogo em √°rea</span>
                      </div>
                      
                      <div class="enemy-item normal">
                        <span class="enemy-level">N√≠vel 4</span>
                        <span class="enemy-icon">üó°Ô∏è</span>
                        <span class="enemy-name">Espadachim Veterano</span>
                        <span class="enemy-desc">Combatente experiente</span>
                      </div>
                      
                      <div class="enemy-item boss">
                        <span class="enemy-level">N√≠vel 5</span>
                        <span class="enemy-icon">üê≤</span>
                        <span class="enemy-name">CHEFE: Drag√£o de Obsidiana</span>
                        <span class="enemy-desc">Primeiro chefe com m√∫ltiplas habilidades</span>
                      </div>
                      
                      <div class="enemy-item normal">
                        <span class="enemy-level">N√≠vel 6-9</span>
                        <span class="enemy-icon">‚öîÔ∏è</span>
                        <span class="enemy-name">Her√≥is Intermedi√°rios</span>
                        <span class="enemy-desc">Inimigos com habilidades avan√ßadas</span>
                      </div>
                      
                      <div class="enemy-item boss">
                        <span class="enemy-level">N√≠vel 10</span>
                        <span class="enemy-icon">üíÄ</span>
                        <span class="enemy-name">CHEFE: Lich Supremo</span>
                        <span class="enemy-desc">Necromante poderoso que invoca aliados</span>
                      </div>
                      
                      <div class="enemy-item normal">
                        <span class="enemy-level">N√≠vel 11-12</span>
                        <span class="enemy-icon">üëë</span>
                        <span class="enemy-name">Her√≥is √âlite</span>
                        <span class="enemy-desc">Os mais poderosos antes do chefe final</span>
                      </div>
                      
                      <div class="enemy-item boss final">
                        <span class="enemy-level">N√≠vel 13</span>
                        <span class="enemy-icon">üòà</span>
                        <span class="enemy-name">CHEFE FINAL: ???</span>
                        <span class="enemy-desc">O desafio supremo aguarda...</span>
                      </div>
                    </div>
                  </div>
                }
              </div>
            </div>
          }
        </div>
      </div>

      <div class="modal-footer">
        <p class="footer-text">
          üéÆ Boa sorte na sua jornada, her√≥i! Use essas informa√ß√µes para se tornar o campe√£o definitivo!
        </p>
      </div>
    </div>
  </div>
}