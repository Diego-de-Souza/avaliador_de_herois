<section class="secao-cadastro">
    @if(isMenuNav){
        <app-header-platform></app-header-platform>
    }
    <div class="secao-cadastro__container">
        <h2>Cadastro de Usuário</h2>
        
        <div class="secao-cadastro__legend">
            <span class="required-legend">*</span> Campos obrigatórios
        </div>
        
        <form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()">
            <!-- Campo Nome Completo -->
            <div class="campo-fullwidth">
                <label for="fullname">
                    Nome completo
                    <span class="required-asterisk">*</span>
                </label>
                <div class="secao-cadastro__container-form__row-line">
                    <fa-icon [icon]="faUser"></fa-icon>
                    <input type="text" name="fullname" formControlName="fullname" id="fullname" placeholder="Digite seu nome completo">
                </div>
                @if(isFieldInvalid('fullname')){
                    <div class="fieldInvalid">Nome é obrigatório e deve ter no mínimo 3 caracteres</div>
                } @else {
                    <div class="fieldInvalid-placeholder"></div>
                }
            </div>

            <!-- Primeira Linha: Nickname, Data de Nascimento, CPF -->
            <div class="secao-cadastro__container-form__row">
                <div class="secao-cadastro__container-form__row__space">
                    <label for="nickname">
                        Nickname
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faUserTag"></fa-icon>
                        <input type="text" name="nickname" formControlName="nickname" id="nickname" placeholder="Digite seu nick name">
                    </div>
                    @if(isFieldInvalid('nickname')){
                        <div class="fieldInvalid">O nickName é obrigatório e deve conter no mínimo 3 caracteres</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
                
                <div class="secao-cadastro__container-form__row__space">
                    <label for="birthdate">
                        Data de Nascimento
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faCalendarDays"></fa-icon>
                        <input type="date" name="birthdate" formControlName="birthdate" id="birthdate" class="custom-option">
                    </div>
                    @if(isFieldInvalid('birthdate')){
                        <div class="fieldInvalid">O campo de data de nascimento é obrigatório</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
                
                <div class="secao-cadastro__container-form__row__space">
                    <label for="cpf">
                        CPF
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faUser"></fa-icon>
                        <input type="text" name="cpf" formControlName="cpf" id="cpf" placeholder="Digite seu CPF" appCpfMask>
                    </div>
                    @if(isFieldInvalid('cpf')){
                        <div class="fieldInvalid">O CPF é obrigatório e deve conter o formato válido</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
            </div>

            <!-- Segunda Linha: Email Principal e Email Secundário -->
            <div class="secao-cadastro__container-form__row">
                <div class="secao-cadastro__container-form__row__space">
                    <label for="firstemail">
                        Email Principal
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faEnvelope"></fa-icon>
                        <input type="email" name="firstemail" formControlName="firstemail" id="firstemail" placeholder="Digite seu email principal">
                    </div>
                    @if(isFieldInvalid('firstemail')){
                        <div class="fieldInvalid">O email é obrigatório e deve conter um formato válido de email</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
                
                <div class="secao-cadastro__container-form__row__space">
                    <label for="secondemail">
                        Email Secundário
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faEnvelope"></fa-icon>
                        <input type="email" name="secondemail" formControlName="secondemail" id="secondemail" placeholder="Digite seu email secundário">
                    </div>
                    @if(isFieldInvalid('secondemail')){
                        <div class="fieldInvalid">O email deve conter um formato válido de email</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
            </div>

            <!-- Terceira Linha: CEP e UF - COM A DIRETIVA appCepMask APLICADA -->
            <div class="secao-cadastro__container-form__row">
                <div class="secao-cadastro__container-form__row__space">
                    <label for="cep">
                        CEP
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faSignsPost"></fa-icon>
                        <input 
                            type="text" 
                            name="cep" 
                            formControlName="cep" 
                            id="cep" 
                            placeholder="00000-000" 
                            (blur)="buscarEndereco()"
                            appCepMask>
                    </div>
                    @if(isFieldInvalid('cep')){
                        <div class="fieldInvalid">O CEP é obrigatório e deve conter 8 dígitos</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
                
                <div class="secao-cadastro__container-form__row__space">
                    <label for="uf">
                        UF
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faSignsPost"></fa-icon>
                        <input type="text" name="uf" formControlName="uf" id="uf" placeholder="UF" maxlength="2">
                    </div>
                    @if(isFieldInvalid('uf')){
                        <div class="fieldInvalid">O UF é obrigatório</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
            </div>

            <!-- Quarta Linha: Endereço e Complemento -->
            <div class="secao-cadastro__container-form__row">
                <div class="secao-cadastro__container-form__row__space">
                    <label for="address">
                        Endereço
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faMapLocationDot"></fa-icon>
                        <input type="text" name="address" formControlName="address" id="address" placeholder="Digite seu endereço">
                    </div>
                    @if(isFieldInvalid('address')){
                        <div class="fieldInvalid">O endereço é obrigatório</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
                
                <div class="secao-cadastro__container-form__row__space">
                    <label for="complement">
                        Complemento
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faMap"></fa-icon>
                        <input type="text" name="complement" id="complement" placeholder="Digite o complemento">
                    </div>
                    <div class="fieldInvalid-placeholder"></div>
                </div>
            </div>

            <!-- Quinta Linha: Estado e Cidade -->
            <div class="secao-cadastro__container-form__row">
                <div class="secao-cadastro__container-form__row__space">
                    <label for="state">
                        Estado
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faVihara"></fa-icon>
                        <input type="text" id="state" name="state" formControlName="state" placeholder="Digite o estado">
                    </div>
                    @if(isFieldInvalid('state')){
                        <div class="fieldInvalid">O estado é obrigatório</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
                
                <div class="secao-cadastro__container-form__row__space">
                    <label for="city">
                        Cidade
                        <span class="required-asterisk">*</span>
                    </label>
                    <div class="secao-cadastro__container-form__row-line">
                        <fa-icon [icon]="faCity"></fa-icon>
                        <input type="text" id="city" name="city" formControlName="city" placeholder="Digite a cidade">
                    </div>
                    @if(isFieldInvalid('city')){
                        <div class="fieldInvalid">A cidade é obrigatória</div>
                    } @else {
                        <div class="fieldInvalid-placeholder"></div>
                    }
                </div>
            </div>

            @if(!isEditMode){
                <div class="secao-cadastro__container-form__row">
                    <div class="secao-cadastro__container-form__row__space">
                        <label for="password">
                            Senha
                            <span class="required-asterisk">*</span>
                        </label>
                        <div class="secao-cadastro__container-form__row-line">
                            <fa-icon [icon]="faLock"></fa-icon>
                            <input type="password" name="password" formControlName="password" id="password" placeholder="**********">
                        </div>
                        @if(isFieldInvalid('password')){
                            <div class="fieldInvalid">A senha é obrigatória e deve ter no mínimo 6 caracteres</div>
                        } @else {
                            <div class="fieldInvalid-placeholder"></div>
                        }
                    </div>
                    
                    <div class="secao-cadastro__container-form__row__space">
                        <label for="confirmPassword">
                            Confirme a senha
                            <span class="required-asterisk">*</span>
                        </label>
                        <div class="secao-cadastro__container-form__row-line">
                            <fa-icon [icon]="faLock"></fa-icon>
                            <input type="password" name="confirmPassword" formControlName="confirmPassword" id="confirmPassword" placeholder="***********">
                        </div>
                        @if(isFieldInvalid('confirmPassword')){
                            <div class="fieldInvalid">A confirmação da senha é obrigatória</div>
                        } @else if(getPasswordError()){
                            <div class="fieldInvalid">As senhas não coincidem</div>
                        } @else {
                            <div class="fieldInvalid-placeholder"></div>
                        }
                    </div>
                </div>
            }
            
            <button type="submit" [disabled]="cadastroForm.invalid" class="btn_submit">Cadastrar</button>
        </form>
        
        @if(isRegister){
            <div class="btn-home">
                <a routerLink="/login" routerLinkActive="active" class="btn-return">Return</a>
            </div>
        }
    </div>
</section>