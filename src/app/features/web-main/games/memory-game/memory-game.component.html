<div [ngClass]="_themeMemoryGame" class="memory-game-root">
  <div class="controls">
    <label>
      Tema:
      <select [(ngModel)]="selectedTheme" (change)="onThemeChange(selectedTheme)">
        <option *ngFor="let theme of themes" [value]="theme">{{ theme }}</option>
      </select>
    </label>
    <label>
      Nível:
      <select [(ngModel)]="selectedLevel" (change)="onLevelChange(selectedLevel)">
        <option *ngFor="let lvl of levels" [value]="lvl">{{ lvl }}</option>
      </select>
    </label>
    <button class="memory-btn" (click)="restart()">Reiniciar</button>
    @if(userProgress){
      <span class="progress-info">
        Progresso: Nível {{userProgress.lvl_user}}, Tema: {{userProgress.metadata?.theme}}
      </span>
    }
    
  </div>

  <div class="memory-matrix">
    <div
      class="memory-card"
      *ngFor="let card of cards"
      [class.flipped]="card.flipped || card.matched"
      (click)="flipCard(card)"
    >
      <div class="memory-card-inner">
        <div class="memory-card-front">
          <img [src]="card.url" alt="card" />
        </div>
        <div class="memory-card-back">
          <span class="card-back-title">Platform<br>Heroes</span>
        </div>
      </div>
    </div>
  </div>
@if (showModal) {
  <div class="modal fade show d-block" tabindex="-1" style="background:rgba(0,0,0,0.5);">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <app-modal-sucesso-cadastro
          [modalTitle]="modalTitle"
          [modalMessage]="modalMessage"
          (closeModalEvent)="closeModal()">
        </app-modal-sucesso-cadastro>
      </div>
    </div>
  </div>
}