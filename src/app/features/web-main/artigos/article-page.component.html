<div id="container-articles-page" [ngClass]="themeHome">
  <app-header></app-header>
  <app-carousel
    [images]="images"
    [height]="'520px'"
    [width]="'100%'"
    [imgHeight]="'520px'"
    [imgWidth]="'100%'"
    class="carousel-articles"
  ></app-carousel>
  <div class="articles-layout">
    <aside class="articles-sidebar">
      <h3>Filtrar por</h3>
      <ul>
        <li>
          <label for="dateFilter">Por data</label>
          <input id="dateFilter" type="date" (change)="setDateFilter(getValue($event))" />
        </li>
        <li>
          <label for="categoryFilter">Por categoria</label>
          <select id="categoryFilter" (change)="setCategoryFilter(getValue($event))">
            <option value="">Todas</option>
            <option *ngFor="let cat of categories" [value]="cat">{{cat}}</option>
          </select>
        </li>
        <li>
          <label for="keywordFilter">Palavra-chave</label>
          <input id="keywordFilter" type="text" placeholder="Digite a palavra" (input)="setKeywordFilter(getValue($event))" />
        </li>
        <li>
          <label for="themeFilter">Tema</label>
          <select id="themeFilter" (change)="setThemeFilter(getValue($event))">
            <option value="">Todos</option>
            <option *ngFor="let theme of themes" [value]="theme">{{theme}}</option>
          </select>
        </li>
        <li>
          <label for="authorFilter">Autor</label>
          <input id="authorFilter" type="text" placeholder="Digite o autor" (input)="setAuthorFilter(getValue($event))" />
        </li>
        <li (click)="setFilter('destaques')" [class.active]="filter === 'destaques'">Destaques</li>
        <li (click)="setFilter('mais-vistos')" [class.active]="filter === 'mais-vistos'">Mais vistos</li>
      </ul>
    </aside>
    <main class="articles-main">
      <div class="articles-grid">
        @for(article of paginatedArticles(); track article) {
          <div class="article-card" (click)="openModal(article)">
            <img [src]="article.image || 'assets/img/placeholder.jpg'" alt="thumb" />
            <h4>{{article.title}}</h4>
            <p>{{article.description}}</p>
          </div>
        }
      </div>
      <div class="pagination">
        <button (click)="prevPage()" [disabled]="page === 1">Anterior</button>
        <span>Página {{page}} de {{totalPages}}</span>
        <button (click)="nextPage()" [disabled]="page === totalPages">Próxima</button>
      </div>
    </main>
  </div>
  <app-newsletter></app-newsletter>
  <app-footer></app-footer>

  <!-- Modal de artigo -->
   @if(selectedArticle){
    <div class="modal-article" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="close-btn" (click)="closeModal()">×</button>
        <h2 class="modal-title">{{selectedArticle.title}}</h2>
        <img [src]="selectedArticle.image" alt="imagem artigo" />
        <div class="modal-body">
          <p>{{selectedArticle.text}}</p>
          @if(selectedArticle.route){
            <a
              [href]="selectedArticle.route"
              target="_blank"
              rel="noopener"
              class="btn-acessar-noticia"
            >
              Acessar notícia completa
            </a>
          }
          <div class="articles-page-data">
            <h4>Dados:</h4>
            <div><strong>Autor:</strong> {{selectedArticle.author || 'Desconhecido'}}</div>
            <div><strong>Categoria:</strong> {{selectedArticle.category}}</div>
            <div><strong>Tema:</strong> {{selectedArticle.theme}}</div>
          </div>
        </div>
      </div>
    </div>
   }
  
</div>